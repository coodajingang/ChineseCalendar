<!DOCTYPE html>
<html lang="zh">
<meta name="keywords" content="农历, 干支, 生肖, 干支纪年, 干支纪月, 干支纪日, 干支纪时, 月建, 正月, 五虎遁月歌" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
<title>六 十 干 支</title>
<link rel="stylesheet" href="calendar_chinese.css">
<script src="header.js"></script>
</head>

<body onload="header(2,'sexagenary','sexagenary')">
<div id="wrapper0">
<div id="menu"></div>
<div id="language"></div>
    
<h1>六 十 干 支</h1>
<p>初稿: 2018年10月&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近一次重大修订: 2019年7月7日</p>

<br />    
<p>干支是中国传统的纪数系统，现在还在使用。干支纪数是由天干和地支组合。天干有十个，地支有十二个，每一个地支有一种动物与之对应，称为生肖或属相。下表列出所有天干、地支及其对应的十二生肖。</p>
    
  <br /> 
<table id="stemsNbranches">
    <caption>表 一: 天 干 和 地 支</caption>
<tr><td></td><th>天干</th> <td></td> <th>地支</th> <th>生肖</th></tr>
    
<tr><td>1</td> <td>甲</td> <td>1</td> <td>子</td> <td>鼠</td></tr>
    
<tr><td>2</td> <td>乙</td> <td>2</td> <td>丑</td> <td>牛</td></tr>
    
<tr><td>3</td> <td>丙</td> <td>3</td> <td>寅</td> <td>虎</td></tr>
    
<tr><td>4</td> <td>丁</td> <td>4</td> <td>卯</td> <td>兔</td></tr>
    
<tr><td>5</td> <td>戊</td> <td>5</td> <td>辰</td> <td>龙</td></tr>
    
<tr><td>6</td> <td>己</td> <td>6</td> <td>巳</td> <td>蛇</td></tr>
    
<tr><td>7</td> <td>庚</td> <td>7</td> <td>午</td> <td>马</td></tr>
    
<tr><td>8</td> <td>辛</td> <td>8</td> <td>未</td> <td>羊</td></tr>
    
<tr><td>9</td> <td>壬</td> <td>9</td> <td>申</td> <td>猴</td></tr>
    
<tr><td>10</td> <td>癸</td> <td>10</td> <td>酉</td> <td>鸡</td></tr>
    
<tr><td rowspan="2" colspan="2"></td> <td>11</td> <td>戌</td> <td>狗</td></tr>

<tr><td>12</td> <td>亥</td> <td>猪</td></tr>
</table>
       <br />
    
<p>干支纪数由甲子(1,1)起，然后是乙丑(2,2)、丙寅(3,3)、丁卯(4,4)……癸酉(10,10)。到癸酉时天干用尽了，之后的规则是凡是天干或地支用尽后须从头数起，所以癸酉之后是甲戌(1,11)、乙亥(2,12)、丙子等等直到癸亥(10,12)。癸亥后的干支是甲子(1,1)，然后是乙丑(2,2)等等循环不息。如下表所示，从甲子到癸亥一共有六十个干支。</p>
    
<table id="sexagenary">
    <caption>表 二: 六 十 干 支</caption>
<tr>
<td>1</td><td>甲子</td>
<td>16</td><td>己卯</td>
<td>31</td><td>甲午</td>
<td>46</td><td>己酉</td>
</tr>
<tr>
<td>2</td><td>乙丑</td>
<td>17</td><td>庚辰</td>
<td>32</td><td>乙未</td>
<td>47</td><td>庚戌</td>
</tr>
<tr>
<td>3</td><td>丙寅</td>
<td>18</td><td>辛巳</td>
<td>33</td><td>丙申</td>
<td>48</td><td>辛亥</td>
</tr>
<tr>
<td>4</td><td>丁卯</td>
<td>19</td><td>壬午</td>
<td>34</td><td>丁酉</td>
<td>49</td><td>壬子</td>
</tr>
<tr>
<td>5</td><td>戊辰</td>
<td>20</td><td>癸未</td>
<td>35</td><td>戊戌</td>
<td>50</td><td>癸丑</td>
</tr>
<tr>
<td>6</td><td>己巳</td>
<td>21</td><td>甲申</td>
<td>36</td><td>己亥</td>
<td>51</td><td>甲寅</td>
</tr>
<tr>
<td>7</td><td>庚午</td>
<td>22</td><td>乙酉</td>
<td>37</td><td>庚子</td>
<td>52</td><td>乙卯</td>
</tr>
<tr>
<td>8</td><td>辛未</td>
<td>23</td><td>丙戌</td>
<td>38</td><td>辛丑</td>
<td>53</td><td>丙辰</td>
</tr>
<tr>
<td>9</td><td>壬申</td>
<td>24</td><td>丁亥</td>
<td>39</td><td>壬寅</td>
<td>54</td><td>丁巳</td>
</tr>
<tr>
<td>10</td><td>癸酉</td>
<td>25</td><td>戊子</td>
<td>40</td><td>癸卯</td>
<td>55</td><td>戊午</td>
</tr>
<tr>
<td>11</td><td>甲戌</td>
<td>26</td><td>己丑</td>
<td>41</td><td>甲辰</td>
<td>56</td><td>己未</td>
</tr>
<tr>
<td>12</td><td>乙亥</td>
<td>27</td><td>庚寅</td>
<td>42</td><td>乙巳</td>
<td>57</td><td>庚申</td>
</tr>
<tr>
<td>13</td><td>丙子</td>
<td>28</td><td>辛卯</td>
<td>43</td><td>丙午</td>
<td>58</td><td>辛酉</td>
</tr>
<tr>
<td>14</td><td>丁丑</td>
<td>29</td><td>壬辰</td>
<td>44</td><td>丁未</td>
<td>59</td><td>壬戌</td>
</tr>
<tr>
<td>15</td><td>戊寅</td>
<td>30</td><td>癸巳</td>
<td>45</td><td>戊申</td>
<td>60</td><td>癸亥</td>
</tr>
</table>
    
<br />

<p>由于干支数是循环的，表一和表二并非显示干支的最好方法，较好的方法是将天干和地支排列在圆环之上:</p>
<br />
<p>
    <img src="stems_chinese.png" alt="天干图" style="max-width:100%;" />
    <img src="branches_simp.png" alt="地支图" style="max-width:100%;" />
</p>
<br />
<p><img src="sexagenary_chinese.png" alt="六十干支图" style="max-width:100%;" /></p>
<br />
<p>从这些图可见每一个天干、地支和干支组合地位平等，现在天干、地支和干支的数序只是根据传统的习惯来定而已。
</p>


<p>干支可用来纪年、纪月、纪日和纪时，但是现在已很少用干支来纪月、纪日和纪时了。下面简略介绍如何用干支来纪年、纪月、纪日和纪时。</p>
<br />

<h2>干 支 纪 年</h2>
    
<p>现在的农历年一般只用干支纪年，六十年循环一周。最近一周始于1984年农历甲子年。其他公历y年的农历年干支可用同余算术算出。所谓公历y年的农历年是指年首最接近公历y年1月1日的农历年。例如2018年的农历年是指农历戊戌年，始于公历2018年2月16日，终于2019年2月4日。</p>
    
<p>农历年的天干十年循环一周，年地支十二年循环一周。已知1984年的农历年干支为甲子，以mod(X,Y)表示X除以Y后所得之余数，可推出公历y年之农历年天干数为 1 + mod(y+6, 10)，即将公历年数加六，除以十，然后把所得的余数加一。年地支数为 1 + mod(y+8, 12)。依此可算出2018年之农历年天干数为五，即戊，地支数为十一，即戌。所以2018年之农历年干支是戊戌。</p>
    
    <br />
<h2 id="jian">月 建 和 「三 正」</h2>
    
<p>月建是指农历月的地支名，但不计闰月，闰月没有月建。由于一年有十二个月(不计闰月)，每一个月有固定的月建。建子月取含冬至的月份，建丑月是下一个月(不计闰月)，余类推。月建在早期历法颇为重要。</p>
    
<p>传说早期各朝代以不同的月建作为一年的年首。据说夏代以建寅(即现在的正月)的月份为第一个月;商朝以建丑(即现在的十二月)为第一个月;周朝以建子的月份(现在的十一月)为第一个月。每次更改月份次序，就把更改后的第一个月称为「正月」，「正」是改正的意思。所以夏正为建寅，殷正为建丑，周正为建子。夏正、殷正和周正称为「三正」。</p>
    
<p>现在一般认为三正之传说不可信。战国时代，各国施行不同历法，当时通行的历法主要有六种:周历、鲁历、殷历、夏历、黄帝历和颛顼历，合称「<a href="guliuli_simp.html">古六历</a>」。六历之名并非是不同时期不同朝代所制定，而是战国时期的历法家托古而作。所谓「三正」，只是指夏历、殷历和周历所用的三个不同年首。所以「三正」不是夏商周三朝交替使用的历法年首，而是春秋战国时期不同地域施行历法的三个不同年首。</p>
    
<p>秦朝的历法和颛顼历很接近，两者都是以建亥(现在的十月)作为一年之始，但仍依夏历称建亥为十月，历法的月序是十月、十一月、十二月、正月、二月……九月。汉朝建立后基本上沿用秦历，直到汉武帝太初元年(公元前104年)才颁行新历法，以建寅(正月)为年首。此后二千多年来，除了王莽和魏明帝一度改用殷正，武则天和唐肃宗一度改用周正外，一般都用夏正，到现在仍通行。</p>
    
<p>最后要指出，「建」是指北斗七星的斗柄，即玉衡、开阳和瑶光三星(见图一)。方位可用十二地支表示，方法是将地平圈分为十二等分来配十二地支，北方是子，东方是卯，南方是午，西方是酉(见图二)。在古代，北斗七星比现在更接近北天极，在中原地区(约北纬35&deg;)大约在唐朝以前斗柄全年都在地平线之上，那时冬至傍晚可见斗柄指向北(子)，所以含冬至的月份称为建子。由于岁差的原故，现在北斗七星离北天极较远。在中原地区，冬至傍晚瑶光在地平线以下，玉衡和开阳在北方地平线附近。现在要去到北纬41&deg;以北的地方才可看到斗柄北指。北纬41&deg;大概在现在的内蒙古呼和浩特市、河北省承德市、辽宁省锦州市等地区。</p>
    
<p><figure>
    <img src="Dipper_simp.png" alt="北斗七星" style="max-width:100%;" />
    <figcaption>图一: 北斗七星</figcaption>
</figure><figure>
<img src="direction_branch_simp.png" alt="地支与方位" style="max-width:100%;" />
<figcaption>图二: 地支与方位</figcaption>
</figure></p>

    
<br />
<h2>干 支 纪 月</h2>
    
<p>干支纪月较为复杂，据<a href="https://zh.wikipedia.org/zh-cn/%E5%B9%B2%E6%94%AF#%E5%B9%B2%E6%94%AF%E7%BA%AA%E6%9C%88" target="_blank">维基百科</a>所述，有两种干支纪月法。我在<a href="index_simp.html">年历</a>网页里使用了第一种纪月法。其实干支纪月即使在古代的史书和日历里也不常用，干支纪月最常用于占卜和风水。年历网页里自汉武帝太初元年(公元前104年)起才注有月干支。这里姑且也简单介绍两种干支纪月法。</p>
    <br />
<h3>第一种纪法</h3>
    
<p>此一纪法以农历月配干支，但不计闰月，闰月的干支取上一月的干支。纪法是把月建配上天干，六十月(即五年)循环一周。由于年天干的周期是十年，年干与月干有二对一的对应关系。例如年干为甲或己时，正月的干支必然是丙寅，二月是丁卯，其余可以类推。下表列出月干支与年天干的关系。</p>
    
    <br />
<table>
<tr><th>年天干</th> <th>正月</th> <th>二月</th> <th>三月</th> 
<th>四月</th> <th>五月</th> <th>六月</th> <th>七月</th> 
    <th>八月</th> <th>九月</th> <th>十月</th> <th>十一月</th> 
    <th>十二月</th> </tr>
<tr><td>甲、己</td> <td>丙寅</td> <td>丁卯</td> <td>戊辰</td>
    <td>己巳</td> <td>庚午</td> <td>辛未</td> <td>壬申</td> 
    <td>癸酉</td> <td>甲戌</td> <td>乙亥</td> <td>丙子</td> 
    <td>丁丑</td></tr>
<tr><td>乙、庚</td> <td>戊寅</td> <td>己卯</td> <td>庚辰</td>
    <td>辛巳</td> <td>壬午</td> <td>癸未</td> <td>甲申</td>
    <td>乙酉</td> <td>丙戌</td> <td>丁亥</td> <td>戊子</td> 
    <td>己丑</td></tr>
<tr><td>丙、辛</td> <td>庚寅</td> <td>辛卯</td> <td>壬辰</td>
    <td>癸巳</td> <td>甲午</td> <td>乙未</td> <td>丙申</td>
    <td>丁酉</td> <td>戊戌</td> <td>己亥</td> <td>庚子</td> 
    <td>辛丑</td></tr>
<tr><td>丁、壬</td> <td>壬寅</td> <td>癸卯</td> <td>甲辰</td>
    <td>乙巳</td> <td>丙午</td> <td>丁未</td> <td>戊申</td>
    <td>己酉</td> <td>庚戌</td> <td>辛亥</td> <td>壬子</td> 
    <td>癸丑</td></tr>
<tr><td>戊、癸</td> <td>甲寅</td> <td>乙卯</td> <td>丙辰</td>
    <td>丁巳</td> <td>戊午</td> <td>己未</td> <td>庚申</td>
    <td>辛酉</td> <td>壬戌</td> <td>癸亥</td> <td>甲子</td> 
    <td>乙丑</td></tr>
</table>
    <br />
    
<p>从上表可方便算出任何农历年的月干支。例如2018年是农历戊戌年，从上表可知年天干为戊的五月干支是戊午，所以戊戌年的五月干支是戊午。有《五虎遁月歌》歌诀以便记忆正(寅)月的月干与年干的关系: 甲己之年丙作初，乙庚之岁戊为头，丙辛岁首从庚起，丁壬壬位顺流行，若问戊癸何方法，甲寅之上好推求。</p>
    
<p>其实要算出某年的月干只需记住年干为甲时正月的月干是丙就可以了，其他月的月干可先计算其与甲年干的月数，然后用同余算术推出其月干。这里以戊戌年五月为例，戊是甲之后的四个天干，所以如果以甲年算起，戊年五月就是甲年的 (4&times;12+5) 或五十三月，戊年五月的天干是丙往下数第五十二个天干，由于mod(52, 10) = 2，即五十二除以十之余数为二，丙以后的第二个天干是戊，所以戊戌年的五月的干支是戊午。</p>

<p>这种纪法为明朝和清朝钦天监编的官方历书所采用(见存世明清历书，例如<a href="https://www.loc.gov/item/2014514059" target="_blank">明嘉靖三年大统历</a>、<a href="https://www.loc.gov/item/2014514060/" target="_blank">清康熙九年时宪历</a>等)，也用于近代历书(例如《100年袖珍干支月历》，刘宝琳(紫金山天文台研究员)编，商务印书馆(香港), 1993)。如上述，闰月没有月建，据明清的历书所载，闰月的月干支以月内之节气划分，节气之前用前月的干支，节气之后用下月的干支。例如清康熙九年闰二月，月内有节气清分在闰二月十五，清明前用正月干支(己卯)，清明后用三月干支(庚辰)。</p>
<br />
    
<h3>第二种纪法</h3>
    
<p>这种纪法不依农历的月份，而是根据二十四节气分月。子月定为由大雪至小寒前一日，丑月定为由小寒至立春前一日等等。下表列出各月对应的节气段，近似农历月份，和近似的公历日期。</p>
<br />
<table>
<tr><th>月地支</th> <th>节气段</th> <th>近似农历月份</th> <th>近似公历日期</th></tr>
<tr><td>子</td> <td>大雪至小寒前一日</td> <td>十一月</td> <td>12月7日&ndash;1月5日</td></tr>
<tr><td>丑</td> <td>小寒至立春前一日</td> <td>十二月</td> <td>1月6日&ndash;2月3日</td></tr>
<tr><td>寅</td> <td>立春至惊蛰前一日</td> <td>正月</td> <td>2月4日&ndash;3月5日</td></tr>
<tr><td>卯</td> <td>惊蛰至清明前一日</td> <td>二月</td> <td>3月6日&ndash;4月4日</td></tr>
<tr><td>辰</td> <td>清明至立夏前一日</td> <td>三月</td> <td>4月5日&ndash;5月5日</td></tr>
<tr><td>巳</td> <td>立夏至芒种前一日</td> <td>四月</td> <td>5月6日&ndash;6月5日</td></tr>
<tr><td>午</td> <td>芒种至小暑前一日</td> <td>五月</td> <td>6月6日&ndash;7月6日</td></tr>
<tr><td>未</td> <td>小暑至立秋前一日</td> <td>六月</td> <td>7月7日&ndash;8月7日</td></tr>
<tr><td>申</td> <td>立秋至白露前一日</td> <td>七月</td> <td>8月8日&ndash;9月7日</td></tr>
<tr><td>酉</td> <td>白露至寒露前一日</td> <td>八月</td> <td>9月8日&ndash;10月7日</td></tr>
<tr><td>戌</td> <td>寒露至立冬前一日</td> <td>九月</td> <td>10月8日&ndash;11月6日</td></tr>
<tr><td>亥</td> <td>立冬至大雪前一日</td> <td>十月</td> <td>11月7日&ndash;12月6日</td></tr>
</table>
    <br />
<p>二十四节气是根据太阳在天球上的位置而定，不考虑月相，所以是纯阳历。公历也是纯阳历，所以以上各月的公历日期每年最多只有一两日之差。农历是阴阳历，既考虑月相也顾及太阳位置，以上各月的起始日期在农历中可以有多至三十日的变动。</p>
    
<p>古代称由冬至到下一个冬至的周期为岁，称由农年正月初一到下一年正月初一的周期为年。所以岁是纯阳历的概念，而年则属阴阳历。一岁的周期是三百六十五或三百六十六日，平均值接近回归年(365.242日)。一年的周期大约是三百五十四日(无闰月时)或约三百八十四日(有闰月时)。用这种节气定月的法则，一岁有十二个月，每月大至有三十或三十一日，没有闰月。月份配上天干，六十月(即五岁)循环一周。</p>
<br />
    
<h2>干 支 纪 日</h2>
    
<p>日干支以六十天循环一周。中国最迟从春秋鲁隐公三年(公元前720年)起就有史藉用干支纪日，距今已有二千七百多年，其间干支纪日既没有间断，又没有发生过错乱。</p>
    
<p>日的干支可从该日的儒略日数以同余算术推出。儒略日数是指从公元前4713年1月1日正午起算的积日，所以每日正午的儒略日数是整数。这里没有说明所用的时间标准(UT1 或地方时等)，是假设了起算时刻(公元前4713年1月1日正午)和每日正午所指的时刻用相同的时间标准。公历某月日的儒略日数有公式计算(例如<a href="https://zh.wikipedia.org/wiki/%E5%84%92%E7%95%A5%E6%97%A5" target="_blank">维基百科</a>)，我也建立了<a href="Julian_simp.html">儒略日数和日干支计算器</a>网页，提供公历日期与儒略日数和日干支的转换。</p>
    
<p>由于日干支的周期是六十天，只要知道某一儒略日数的日干支，便可用同余算术推出儒略日数和日干支的关系。查<a href="index_simp.html?y=2019">2019年历</a>，得知公元2019年1月27日的日干支是甲子，而该日正午的儒略日数是2458511。从mod(2458511, 60) = 11，可推出某日正午儒略日数<span class="nowrap">JD<sub style='font-size:60%;'>正午</sub></span>与日干支的关系是</p>
<p>日干支数 S=1+mod(JD<sub style='font-size:60%;'>正午</sub>-11, 60)。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)</p>
    
<p>此处干支数是指按上面<a href="sexagenary_simp.html#sexagenary">表二</a>所列的干支次序，即1代表甲子、2代表乙丑、3代表丙寅等等。若以T代表天干数及B代表地支数，即T和B是上面<a href="sexagenary_simp.html#stemsNbranches">表一</a>列出的天干和地支次序，则知道了S后便可用以下公式计算天干数和地支数:</p>
<p>T=1+mod(S-1, 10),&nbsp;&nbsp; B=1+mod(S-1, 12)。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)</p>
    
<p>干支数S虽然在古代历法计算中有时有用，但我认为在大多数情况下是不必要的。天干数T和地支数B可以直接用<span class="nowrap">JD<sub style='font-size:60%;'>正午</sub></span>计算。这可从日天干的周期是十天、日地支周期是十二天、以及上述<span class="nowrap">JD<sub style='font-size:60%;'>正午</sub></span>=2458511对应的日干支是甲子(T=1、B=1)推出。从mod(2458511, 10) = 1及mod(2458511, 12) = 11得出以下公式:</p>
    
<p>T=1+mod(JD<sub style='font-size:60%;'>正午</sub>-1,10)， B=1+mod(JD<sub style='font-size:60%;'>正午</sub>+1,12)。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3)</p>
    
<p>这公式甚为方便，尤其是我们用十进制，天干数T根本不用计算。T基本上就是<span class="nowrap">JD<sub style='font-size:60%;'>正午</sub></span>的最后一个数位的数，唯一例外是如果该数是0，则T是10。现在看一算例:公元1781年3月13日正午的儒略日数是2371629，因此T=9，天干是壬;B=1+mod(2371630,12)=11，地支是戌，所以日干支是壬戌。</p>
    
<p>顺带一提，用<span class="nowrap">JD<sub style='font-size:60%;'>正午</sub></span>也很容易计算星期。星期的周期是七天，已知2019年1月27日是星期日、<span class="nowrap">JD<sub style='font-size:60%;'>正午</sub></span>=2458511、mod(2458511, 7)=6，由此可推出星期数W和<span class="nowrap">JD<sub style='font-size:60%;'>正午</sub></span>的关系如下:</p>
<p>W = mod(JD<sub style='font-size:60%;'>正午</sub>+1, 7)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(4)</p>
<p>星期数W=0代表星期日、W=1代表星期一、W=2代表星期二等等。<a href="index_simp.html">年历网页</a>的星期就是用公式(4)计算。</p>
    
<p>又顺带一提，知道了干支数S后，天干数T和地支数B可用公式(2)轻易计算。反过来，知道天干数T和地支数B后，要求干支数S就要解以下的同余方程:</p>
<p>S &equiv; T (mod 10), &nbsp;&nbsp; S &equiv; B (mod 12)。</p>
<p>此处&equiv;符号表示同余。上面公式是说S-T可被10整除、S-B可被12整除。如果不熟悉同余算术，要找出一条算式来表示S也许会有点困难。对于某一特定的T和B，当然可以查<a href="sexagenary_simp.html#sexagenary">表二</a>找到答案。如果认为查表二等于「作弊」，可以用以下公式计算:</p>
<p>先算 k=6T-5B，如果k&gt;0，则 S=k; 如果k&le;0，则 S=k+60。也可以证明k&gt;0等同于T&ge;B，k&le;0等同于T&lt;B，而T-B必定是偶数。<sup><a href="sexagenary_simp.html#fn1">[1]</a></sup></p>
<p>以上面算出的壬戌干支为例，T=9、B=11，k=6&times;9-5&times;11=-1，所以S=59，正是<a href="sexagenary_simp.html#sexagenary">表二</a>列出壬戌的干支次序。</p>
    
<p>以上所述的同余算术问题并不难。我没有正式学过同余算术理论，但仍能輕易求出其解，原因是求解过程中不须要用到如<a href="https://zh.wikipedia.org/zh-hans/%E5%A4%A7%E8%A1%8D%E6%B1%82%E4%B8%80%E6%9C%AF" target="_blank">大衍求一术</a>这样精妙的算法<sup><a href="sexagenary_simp.html#fn2">[2]</a></sup>。稍为艰难的算题见于《孙子算经》，即著明的「物不知数」算题:<sup><a href="sexagenary_simp.html#fn3">[3]</a></sup>「今有物不知其数，三三数之剩二，五五数之剩三，七七数之剩二。问物几何？」用现代数学算式表示，就是要求一整数x，使得</p>
<p>x &equiv; 2 (mod 3)， &nbsp; x &equiv; 3 (mod 5)， &nbsp; x &equiv; 2 (mod 7)。</p>
<p>中国古代学者在计算历法时遇到了不少同余算术问题(尤其是计算<a href="Shangyuan_simp.html">上元积年</a>)，很可能因此深入研究同余算术，发现了著明的<a href="https://baike.baidu.com/item/%E5%AD%99%E5%AD%90%E5%AE%9A%E7%90%86" target="_blank">孙子定理</a>，西方称为「中国剩余定理」。</p>
<br />
    
<h2>干 支 纪 时</h2>
    
<p>古时将一日分为十二时辰。用现在通用的时间系统来说，一时辰相当于现在的二小时。十二时辰正好配十二地支，所以时辰一般只提地支，不理天干。以现时通用的时间系统来说，子时是晚上十一时至凌晨一时，丑时是凌晨一时至三时，其余可以类推。</p>
    
<p>十二时辰配上天干后，就有六十时辰(即五日)的周期。日干的周期是十日，所以日干与时干有二对一的对应关系，颇似年干与月干的关系。日干与时干也有类似的对照表，但我认为只须知道日干为甲的子时天干是甲就可以了，其他时干可用同余算术推出。这里以丁日的未时为例，丁是甲之后的第三个天干，未是第八个地支，丁日的未时即从甲日算起的第(3&times;12 + 8)个时辰，即第四十四个时辰，所以其天干是从甲起往下数四十三个天干，四十三除以十余数是三，甲之后第三个天干是丁，所以丁日未时的时辰干支是丁未。</p>
<br /><hr />
<h2>备 注</h2>
<ul style="list-style-type:none;">
<li id="fn1"><p><span class="ref">[1]</span> 要验证S的公式确能满足方程(2)不难。首先是把S的公式写成:</p>
<p>S = 6T - 5B + 60n，如果T&ge;B，则n=0;如果T&lt;B，则n=1。</p>
<p>由于T和B之差必是偶数，可把B写成<span class="nowrap">B=T+2j</span>，这里j是某整数，把此式代入S的公式便得:</p>
<p>S = T - 10j + 60n。由于10j和60n都可被10整除，所以</p>
<p>mod(S-1, 10) = mod(T-1, 10) = T-1。</p>
<p>这公式符合方程(2)的左边公式。最后一个等式成立是因为T-1是0和9之间的整数。</p>
<p>用<span class="nowrap">T=B-2j</span>代入S的公式得出</p>
<p>S = B - 12j + 60n。由于12j和60n都可被12整除，所以</p>
<p>mod(S-1, 12) = mod(B-1, 12) = B-1，符合方程(2)的右边公式。</p>
</li>
    <br />
<li id="fn2"><p><span class="ref">[2]</span> 我的推导方法是把S的同余方程写成以下公式:</p>
<p>S=T+10i,&nbsp;   S = B+12j, i和j是某整数。</p>
<p>&rArr; &nbsp; T+10i = B+12 j</p>
<p>&rArr; &nbsp; 6j-5i = (T-B)/2.</p>
<p>i=j=(T-B)/2显然是一解，所以</p>
<p>S = T+10i = T+5(T-B) = 6T-5B，但当T&lt;B时，此数是负数或0，所以此时要加上60使S规范在1和60之间。</p>
<p>这推导中最关键的一步是求两整数p和q满足方程<span class="nowrap">6p-5q=1</span>。求得p和q后，乘<span class="nowrap">(T-B)/2</span>就得i和j。这方程相当简单，p=q=1明显是一解。如果要解的方程是<span class="nowrap">aj-bi=1</span>而a和b是其他整数，或许不会那么容易猜到答案，那时就要用<a href="https://zh.wikipedia.org/zh-hans/%E5%A4%A7%E8%A1%8D%E6%B1%82%E4%B8%80%E6%9C%AF" target="_blank">大衍求一术</a>求解。</p>
</li>
    <br />
<li id="fn3"><p><span class="ref">[3]</span> 此算题相当著明，甚至连金庸武侠小说《射雕英雄传》也引用。书中说郭靖和黄蓉离开瑛姑居所前，黄蓉出了三道算题考瑛姑，第三道题就是物不知数算题。后来黄蓉与瑛姑再碰面，问起那三道算题，瑛姑却一道题也算不出，她对物不知数算题尤其感兴趣:「这第三道题呢，说易是十分容易，说难却又难到了极处……我知道这(答案)是二十三，不过那是硬凑出来的，要列一个每数皆可通用的算式，却是想破了脑袋也想不出。」黄蓉于是说出答案:「以三三数之，余数乘以七十；五五数之，余数乘以二十一；七七数之，余数乘十五。三者相加，如不大于一百零五，即为答数；否则须减去一百零五或其倍数。」</p>
<p>用现代数学的数式表示或会有助理解。用a、b、c表示未知数x被三、五、七除后所得之余数，《孙子算经》给出的答案是</p>
<p>x = 70a + 21b + 15c - 105n，n是任意整数。</p>
<p>推导此式须要用孙子定理，一般谈论同余算术的书藉或文章应该有论述(例如<a href="https://web.math.sinica.edu.tw/math_media/d233/23310.pdf" target="_blank">这篇文章</a>)。但是要验证这答案确能满足算题的要求却不难:由于21b、15c和105n都可被三整除，mod(x,3) = mod(70a, 3) = mod(3&times;23a+a,3) = mod(a,3)=a，用类此计算可得mod(x,5)=b及mod(x,7)=c。</p></li>
</ul>
</div> <!-- end of wrapper -->
<br /><br />
</body>
</html>